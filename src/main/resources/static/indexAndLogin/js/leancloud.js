!function(e,t){function n(e,t){return new Promise(function(n,o){e("get","/classes/Counter?where="+encodeURIComponent(JSON.stringify({target:t}))).then(e=>e.json()).then(({results:r,code:a,error:i})=>{if(401===a)throw i;if(r&&r.length>0){var l=r[0];n(l)}else e("post","/classes/Counter",{target:t,time:0}).then(e=>e.json()).then((e,t)=>{if(t)throw t;n(e)}).catch(e=>{console.error("Failed to create",e),o(e)})}).catch(e=>{console.error("LeanCloud Counter Error:",e),o(e)})})}function o(e){return{method:"PUT",path:`/1.1/classes/Counter/${e}`,body:{time:{__op:"Increment",amount:1}}}}function r(r){var a=!0===CONFIG.web_analytics.enable,i=[],l=[],s=t.querySelector("#leancloud-site-pv-container");if(s){var c=n(r,"site-pv").then(e=>{a&&l.push(o(e.objectId));var n=t.querySelector("#leancloud-site-pv");n&&(n.innerText=e.time+1,s&&(s.style.display="inline"))});i.push(c)}var u,p,h=t.querySelector("#leancloud-site-uv-container");if(h){var d=n(r,"site-uv").then(e=>{var n=(u="LeanCloud_UV_Flag",!((p=localStorage.getItem(u))&&(new Date).getTime()-parseInt(p,10)<=864e5||(localStorage.setItem(u,(new Date).getTime().toString()),0)));n&&a&&l.push(o(e.objectId));var r=t.querySelector("#leancloud-site-uv");r&&(r.innerText=e.time+(n?1:0),h&&(h.style.display="inline"))});i.push(d)}var v=t.querySelector("#leancloud-page-views-container");if(v){var y=decodeURI(e.location.pathname),f=n(r,y).then(e=>{if(a&&l.push(o(e.objectId)),v){var n=t.querySelector("#leancloud-page-views");n&&(n.innerText=(e.time||0)+1,v.style.display="inline")}});i.push(f)}a&&Promise.all(i).then(()=>{l.length>0&&function(e,t){new Promise(function(n,o){e("post","/batch",{requests:t}).then(e=>{if((e=e.json()).error)throw e.error;n(e)}).catch(e=>{console.error("Failed to save visitor count",e),o(e)})})}(r,l)})}var a=CONFIG.web_analytics.leancloud.app_id,i=CONFIG.web_analytics.leancloud.app_key,l=CONFIG.web_analytics.leancloud.server_url;function s(e){r((t,n,o)=>fetch(`${e}/1.1${n}`,{method:t,headers:{"X-LC-Id":a,"X-LC-Key":i,"Content-Type":"application/json"},body:JSON.stringify(o)}))}var c="-MdYXbMMI"!==a.slice(-9)?l:`https://${a.slice(0,8).toLowerCase()}.api.lncldglobal.com`;c?s(c):fetch("https://app-router.leancloud.cn/2/route?appId="+a).then(e=>e.json()).then(e=>{e.api_server&&s("https://"+e.api_server)})}(window,document);